<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/10/24141079_CSE422_10_LabAssignment2_-_NAHIAN_AL_FIZA.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/10/24141079_CSE422_10_LabAssignment2_-_NAHIAN_AL_FIZA.py<p></p><pre>
# -*- coding: utf-8 -*-
"""24141079_CSE422_10_LabAssignment2.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/18lcNjPXiT-4KniGbS11aP0GClnZVhthZ
<a name="1"></a><font color="#00FF00"><a href="match177-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

"""

#Task 1
import random

def read_input(input_file):
    with open(input_file, 'r') as file:
        lines = file.readlines()
        CS = lines[0].strip().split()
        C = int(CS[0]) #Course
        S = int(CS[1]) #Time slots

        courses = [line.strip() for line in lines[1:C+1]]
</font><a name="0"></a><font color="#FF0000"><a href="match177-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_21.gif"/></a>

    return C, S, courses


def population_initialization(population_size, chrosome_length):
    population = []
    for i in range(population_size):
        chromosome = [random.randint(0,1) for i in range(chrosome_length)] #Randomly initialize the chromosome with 0's and 1's
        population.append(chromosome)
    return population

def fitness_function_calc(chromosome, C, S, courses):
    overlap = 0
    consistancy = 0
    timeslots_courses = [[] for i in range(S)] #List to hold courses assigned to each timeslot

    for t in range(S): #assign courses to timeslots
        timeslots_courses[t] = [courses[i] for i in range(C) if chromosome[t * C + i] == 1]

    for k in timeslots_courses:  #calculate penalty for each additional course in the timeslot
</font>        if len(k) &gt; 1:
<a name="2"></a><font color="#0000FF"><a href="match177-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

            overlap += len(k) - 1

    courses_count = {course:0 for course in courses}
    for t in range(S):
        for course in timeslots_courses[t]:
            courses_count[course] += 1
</font>
    for course in courses:
        if courses_count[course] != 1:
            consistancy += abs(courses_count[course] - 1)

    total_penalty = overlap + consistancy
    fitness = -total_penalty #the more negative,the worse the solution

    return fitness


C, S, courses = read_input('input.txt')
chromosome_length = C*S
population_size = 10
population = population_initialization(population_size, chromosome_length)

exp_chromosome = population[0]
#exp_chromosome = [1, 1, 0, 1, 1, 0, 0, 1, 0]
schedule = ''.join(map(str, exp_chromosome))
fitness_value = fitness_function_calc(exp_chromosome, C, S, courses)

print(f'Chromosome: {schedule}')
print(f'Fitness: {fitness_value}')

#Task 2

import random

def population_initialization(population_size, chromosome_length):
    population = [] #Generates an initial population of random chromosomes.
    for i in range(population_size):
        chromosome = [random.randint(0, 1) for _ in range(chromosome_length)]
        population.append(chromosome)
    return population

def two_point_crossover(parent_1, parent_2):
    point1 = random.randint(0, len(parent_1) - 2) #Performs two-point crossover to generate two offspring.
    point2 = random.randint(point1 + 1, len(parent_1) - 1)

    offSpring1 = parent_1[:point1] + parent_2[point1:point2] + parent_1[point2:]#Swap the middle segments between the parents
    offSpring2 = parent_2[:point1] + parent_1[point1:point2] + parent_2[point2:]

    return offSpring1, offSpring2

def chromosome_to_string(chromosome):
    """Converts a chromosome list (binary) to a string."""
    return ''.join(map(str, chromosome))

C = int(input("Enter the number of courses: ")) #Number of courses means C and slots S
S = int(input("Enter the number of slots: "))

chromosome_length = C * S #total number of genes

population_size = 10 #Initialize a population of random chromosomes
population = population_initialization(population_size, chromosome_length)

parent1 = random.choice(population) #parent1 = '000111000'
parent2 = random.choice(population) #parent2 = '111000111'

child1, child2 = two_point_crossover(parent1, parent2) #Perform two-point crossover

#Convert chromosomes to binary
parent1_str = chromosome_to_string(parent1)
parent2_str = chromosome_to_string(parent2)
child1_str = chromosome_to_string(child1)
child2_str = chromosome_to_string(child2)

#Output the parents and offspring
print(f'Parent 1: {parent1_str}')
print(f'Parent 2: {parent2_str}')
print(f'Child 1:  {child1_str}')
print(f'Child 2:  {child2_str}')</pre>
</body>
</html>
