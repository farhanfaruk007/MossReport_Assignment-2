<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/9/22301056_sadarahmed_22301056_-_SADAR_AHMED.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/9/22301056_sadarahmed_22301056_-_SADAR_AHMED.py<p></p><pre>
# -*- coding: utf-8 -*-
"""SadarAhmed_22301056

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1suw0ZzcmXeEJPNspQdW_dRrhDYqwFJlW
"""

from heapq import *
from random import randint
from random import shuffle



#PART1
def function1(filename):
    file = open(filename, 'r')

    data = file.readlines()
    file.close()

    N, T = data[0].split(" ")
    N, T = int(N), int(T)

    return N, T

def Fitness(array, N, T):
    length = len(array)
    return_array = []

    for i in range(length):
        return_array.append([array[i], fitnessFunction(array[i], N, T)])

<a name="5"></a><font color="#FF0000"><a href="match113-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_3.gif"/></a>

    print(return_array)

def swapping(arrayTwoD):
    temp = arrayTwoD[:]
    for i in temp:
        i[0], i[1] = i[1], i[0]
    return temp

def overlap_penalty(chromosome, N):
</font><a name="0"></a><font color="#FF0000"><a href="match113-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    length = len(chromosome)
    errorCount = 0
    start = 0
    for i in range(N, length + 1, N):
        count = 0

        tempString = chromosome[start:i]
        for j in tempString:
            if j == "1":
                count += 1
</font>        if count == 1:
            count = 0
        elif count &gt; 1:
            count -= 1
        errorCount += count
        start += N
    return errorCount

def consistencypenalty(chromosome, T):
    length = len(chromosome)
    courses = {}

<a name="1"></a><font color="#00FF00"><a href="match113-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_5.gif"/></a>

    for key in range(T):
        courses[key] = 0

    start = 0
    for i in range(T, length + 1, T):
        tempString = chromosome[start:i]

        for key in courses:
            if tempString[key] == "1":
                courses[key] += 1
</font>        start += T

    errorCount = 0
    for key in courses:
        errorCount += absolutedifference(courses[key], 1)
    return errorCount

def absolutedifference(a, b):
    if a &gt; b:
        return a-b
    else:
        return b-a

def fitnessFunction(chromosome, N, T):
    return -1 * (overlap_penalty(chromosome, N) + consistencypenalty(chromosome, T))


def mutationFunction(chromosome):
    length = len(chromosome)
    index = randint(0, length - 1)
    replaceWith = randint(0, 1)
    newString = chromosome[:index] + str(replaceWith) + chromosome[index + 1:]
    return newString

<a name="6"></a><font color="#00FF00"><a href="match113-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

def singlepointcross(chromosomeA, chromosomeB):
    length = len(chromosomeA)
    lastIndex = length - 1
    divider = randint(1, lastIndex - 1)
    newA = chromosomeA[:divider] + chromosomeB[divider:]
    newB = chromosomeB[:divider] + chromosomeA[divider:]
</font>    return newA, newB


def generatePopulation(length, size):
    array = []
    for i in range(size):
        tempChromosome = ""
        for j in range(length):
            tempChromosome += str(randint(0, 1))
        array.append(tempChromosome)
    return array


def G_N_helper(population, N, T):
    temp = population[:]
    finalList = population[:]
    shuffle(temp)
    children = []

<a name="3"></a><font color="#00FFFF"><a href="match113-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    for i in range(0, 10, 2):
        childA, childB = singlepointcross(temp[i], temp[i + 1])
        childA, childB = mutationFunction(temp[i]), mutationFunction(temp[i + 1])
        children += [childA, childB]

    final = finalList + children
</font>    queue = []
    for i in final:
        heappush(queue, [fitnessFunction(i, N, T), i])
    return queue

def geneticAlgorithm(N, T):
    fitness = -100
    population = generatePopulation(N * T, 10)
    print("Part1")
    print()
    print("Randomly generated population and Fitness:",end=" ")
    Fitness(population, N, T)
    print()

    iterator = 0
    while fitness != 0:
<a name="4"></a><font color="#FF00FF"><a href="match113-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

        queue = G_N_helper(population, N, T)
        fitness = nlargest(1, queue)[0][0]
        new_population = []
        temp_population = nlargest(10, queue)

        for i in temp_population:
            if i[1] not in new_population:
                new_population.append(i[1])
</font>        population += new_population
        iterator += 1
        if iterator &gt; 1000000:
            break

    print("Final population and Fitness:",end=" ")
    finalPopulation = nlargest(10, queue)
    print(swapping(finalPopulation))
    print()
    print("iterations:", iterator)

    if iterator &gt; 100000:
        print("Approximate solution:", finalPopulation[0][0], "fitness:", finalPopulation[0][1])
    else:
        print("Final solution:", finalPopulation[0][0])
        print()
        print()
    return finalPopulation[0][0]


N, T = function1("input.txt")
geneticAlgorithm(N, T)

#PART2
def Generate_population(length, size):
    array = []
    for i in range(size):
        tempChromosome = ""
        for j in range(length):
            tempChromosome += str(randint(0, 1))
        array.append(tempChromosome)

    return array


<a name="2"></a><font color="#0000FF"><a href="match113-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

def twopointcross(chromosomeA, chromosomeB):
    length = len(chromosomeA)
    lastIndex = length - 1

    firstpoint = randint(1, lastIndex - 2)
    secondpoint = randint(firstpoint + 1, lastIndex - 1)

    newA = chromosomeA[:firstpoint] + chromosomeB[firstpoint:secondpoint] + chromosomeA[secondpoint:]
</font>    newB = chromosomeB[:firstpoint] + chromosomeA[firstpoint:secondpoint] + chromosomeB[secondpoint:]


    return newA, newB


N, T = function1("input.txt")

array = Generate_population(N*T, 2)
print("Part2")
print("The two parents are:",end=" ")
for i in array:
    print(i)

print()

results = twopointcross(array[0], array[1])
print("After two point crossover:", end=" ")
for i in results:
    print(i)</pre>
</body>
</html>
