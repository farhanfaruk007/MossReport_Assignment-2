<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/11/22101095_Aowfi_CSE422_11_Lab_Assignment2_Fall2024_-_AOWFI_ADON_FORAEJY.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/14/22101407_lab02_-_Md._Tanvir_Haque_Shitab.py<p></p><pre>
# -*- coding: utf-8 -*-
"""22101407_Lab02.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1e85tu3-Kyl4_3HseXK_Oyb_e4ld3Uq3h
"""

import random
#Reading the file
<a name="0"></a><font color="#FF0000"><a href="match130-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_9.gif"/></a>

inp = open("/content/sample_data/22101407_inputfile.txt","r")
a,d = inp.readline().split()
A = int(a)
D = int(d)

courses = []
for i in range(A):
  course = inp.readline().strip()
  courses.append(course)

populationsize = 10  #population size = 10
max = 10

#Creating chromosomes
def chromosome(A,D):
  chromosomes = [0 for i in range(A*D)]
  for crmsm in range(A):
    t = random.randint(0,D-1)
    chromosomes[crmsm+t*A] = 1
  return chromosomes

#Initializing the population
def population(ppl,A,D):
</font>  plist = [chromosome(A,D) for i in range(ppl)]
  return plist


#Fitness function
<a name="1"></a><font color="#00FF00"><a href="match130-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

def fitness(chromosomes,A,D):
  consistency = 0
  overlapping = 0

#consistencyPenalty
  for i in range(A):
    count = 0
    for j in range(D):
      course_segment = chromosomes[j*A:(j+1)*A]
      count+= course_segment[i]
    if count != 1:
      consistency+=abs(count-1)

#OverlappingPenalty
  for t in range(D):
    coursesegment = chromosomes[t*A:(t+1)*A]
    total = 0
</font>    for num in coursesegment:
      total+=num
    if total &gt; 1:
      overlapping += total - 1

  finalfitness = -(overlapping+consistency)
  return finalfitness

#Parents selection
def parent_select(population,fitness):
  total_fitness = 0
  for i in fitness:
    total_fitness+=i
  probablityselection = []
  for k in fitness:
    probablityselection.append(k/total_fitness)
<a name="3"></a><font color="#00FFFF"><a href="match130-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

  cumulative_probabability = [sum(probablityselection[:p+1]) for p in range(len(probablityselection)) ]


  def parent1():
    r = random.random()
    for n, cumu_prob in enumerate(cumulative_probabability):
      if r &lt;= cumu_prob:
        return population[n]
</font>
  def parent2():
    r = random.random()
    for n, cumu_prob in enumerate(cumulative_probabability):
      if r &lt;= cumu_prob:
        return population[n]

  p1 = parent1()
  p2 = parent2()
  return p1,p2

#crossover
def crossover(parent1,parent2):

  point_of_crossover = random.randint(1,len(parent1) - 2)
  child1 = parent1[:point_of_crossover] + parent2[point_of_crossover:]
  child2 = parent2[:point_of_crossover] + parent1[point_of_crossover:]

  return child1,child2


#Mutation
def mutation(chromsome,mut_probability=0.01):

  for num in range(len(chromsome)):
<a name="2"></a><font color="#0000FF"><a href="match130-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_4.gif"/></a>

    if random.random() &lt; mut_probability:
      chromsome[i] = 1 - chromsome[i]

  return chromsome

def genetic_algo(A,D,max,populationsize,mut_probability=0.01):

  initial_population = population(populationsize,A,D)
  fittestchromosome = None
  max_fitness = float('-inf')

  for i in range(max):
</font>    fitnesslist = []
    for chromosomes in initial_population:
      f = fitness(chromosomes,A,D)
      fitnesslist.append(f)

#Finding the choromosome
  for p in range(len(initial_population)):
    if fitnesslist[p] &gt; max_fitness:
      max_fitness = fitnesslist[p]
      fittestchromosome = initial_population[p]

#New_Population
  new_pop = []
  for i in range(populationsize):
    p1,p2 = parent_select(initial_population,fitnesslist)
    c1,c2 = crossover(p1,p2)
    mutated_child1 = mutation(c1,mut_probability=0.01)
    new_pop.append(mutated_child1)
    mutated_child2 = mutation(c2,mut_probability=0.01)
    new_pop.append(mutated_child2)


## Choosing fittest chromosomes
  overallfitness = []
  for i in initial_population:
    fit = fitness(i,A,D)
    overallfitness.append(fit)

  fitness_pairs = []

  for x in range(len(overallfitness)):
    fitness_pairs.append((x,overallfitness[x]))

#Sorting
  for j in range(len(fitness_pairs)):
    for k in range(j+1,len(fitness_pairs)):
      if fitness_pairs[j][1]  &lt; fitness_pairs[k][1]:
        fitness_pairs[j],fitness_pairs[k] = fitness_pairs[k],fitness_pairs[j]

  current_population = []
  for i in range(populationsize):
    idx = fitness_pairs[i][0]
    current_population.append(initial_population[idx])
  initial_population = current_population

  return fittestchromosome, max_fitness



best_chromo, best_fitness = genetic_algo(A,D,max,populationsize,mut_probability=0.01)
best_chromo2 = [str(i) for i in best_chromo]

best_chromo_some = ''.join(best_chromo2)

print("Best Chromosome:", best_chromo_some)
print("Best Fitness:", best_fitness)

#part2

import random
def generate_population(ppl,A,D):
  plist = [chromosome(A,D) for i in range(ppl)]
  return plist


def two_parents_select(ppl):
  idx1 = random.randint(0,len(ppl)-1)
  idx2 = random.randint(0,len(ppl)-1)

  while idx1 == idx2:
    idx2 = random.randint(0,len(ppl) - 1)


  par1 = ppl[idx1]
  par2 = ppl[idx2]
  return par1, par2

def two_point_crossover(par1,par2):

  point_1 = random.randint(1,len(par1)-2)
  point_2 = random.randint(point_1+1,len(par1))

  segm1 = par1[:point_1]
  segm2 = par2[point_1:point_2]
  segm3 = par1[point_2:]

  child1 = segm1 + segm2 + segm3
  seg1 = par1[:point_1]
  seg2 = par2[point_1:point_2]
  seg3 = par1[point_2:]

  child2 = seg1+seg2+seg3
  return child1,child2


init_population = generate_population(populationsize,A,D)
parent_one, parent_two = two_parents_select(init_population)

parent_1 = ''.join([str(i) for i in parent_one])
parent_2 = ''.join(str(i) for i in parent_two)

child_one,child_two = two_point_crossover(parent_one,parent_two)
child1 = ''.join(str(i) for i in child_one)
child2 = ''.join(str(i) for i in child_two)

print("Parent 1:", parent_1, "Parent 2:", parent_2)
print("Resultant offspring 1:", child1, "Resultant offspring 2:", child2)</pre>
</body>
</html>
