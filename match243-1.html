<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/9/22299312__Maidul_Islam_22299312_-_MAIDUL_ISLAM.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/15/24341160_ishraq_kamal_adib_cse422_15_lab_assignment02_fall2024_-_ISHRAQ_KAMAL_ADIB.py<p></p><pre>
# -*- coding: utf-8 -*-
"""24341160_Ishraq Kamal Adib_CSE422_15_Lab_Assignment02_Fall2024.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1NsnD-dbQSjFGSs2mLpG4zcFQsWlSf--p
"""

import random as rd

def popltn(lst_popu,chrom_len):

    for i in range(chrom_len+1):
        chrm = ''
        for i in range (chrom_len):
            chrm+= str(rd.randint(0,1))
        lst_popu.append(chrm)
    return lst_popu

def schdl_maker(lst,n_time,chrom_len):
    schl_lst = []
    n = chrom_len//n_time
<a name="0"></a><font color="#FF0000"><a href="match243-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

    for chrsme in lst:
       slot_scdl = []

       for i in range(n_time):
        bgn = n * i
        end = bgn + n

        slot_scdl.append(chrsme[bgn:end])
        schl_lst.append(slot_scdl)
</font>
    return schl_lst

def fitness(slots_lst,num_course):

    penal_lst=[]
    for slots in slots_lst:
        olp_penal = 0
        c_penal = 0
        # overlap penal (timeslot clash)
<a name="3"></a><font color="#00FFFF"><a href="match243-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_3.gif"/></a>

        for i in slots:
            ovr_l = 0
            for j in i:
                if j=="1":
                    ovr_l+=1
            if ovr_l&gt;0:
</font>                olp_penal+= ovr_l - 1
        # consistency penal
        cnst_list = num_course*[0]

        for i in range(num_course):
            measure = 0
            for j in slots:
                if j[i]=="1":
                    measure+=1
            cnst_list[i] = measure
        for i in cnst_list:
            c_penal+=abs(i-1)

        ovral_penal = -(c_penal + olp_penal)
        penal_lst.append(ovral_penal)
    return penal_lst

<a name="1"></a><font color="#00FF00"><a href="match243-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

def prnt_slct(lst_popu):

    ran1 = rd.randint(0,len(lst_popu)-1)
    ran2 = rd.randint(0,len(lst_popu)-1)
    return (lst_popu[ran1],lst_popu[ran2])
</font>

def crsovr(prnt1,prnt2,chrom_len):
    r_idx = rd.randint(1,chrom_len-1)
    ofspr1 = prnt1[0:r_idx] + prnt2[r_idx:chrom_len]
    ofspr2 = prnt2[0:r_idx] + prnt1[r_idx:chrom_len]
    return mutation(ofspr1,ofspr2)



def mutation(ofspr1,ofspr2):
    os1 = list(ofspr1)
<a name="2"></a><font color="#0000FF"><a href="match243-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

    os2 = list(ofspr2)
    r_idx = rd.randint(0,len(os1)-1)

    if os1[r_idx]=="1":
        os1[r_idx]="0"
</font>    else:
        os1[r_idx]="1"
    if os2[r_idx]=="1":
        os2[r_idx]="0"
    else:
        os2[r_idx]="1"
    os1 = "".join(os1)
    os2 = "".join(os2)
    return [os1,os2]

def ga(num_course,num_time,gen):
    chrom_len = num_course*num_time

    best_ftns = float("-inf")

    best_chrm = None
    lst_popu = popltn([],chrom_len) #1st gen


    for i in range(gen):
        ofs = []
        for i in range(10):
            prnt1,prnt2 = prnt_slct(lst_popu)
            ofsprngs = crsovr(prnt1,prnt2,chrom_len)
            ofs.extend(ofsprngs)
        all_popu = lst_popu + ofs
        all_scdl = schdl_maker(all_popu,n_time,chrom_len)
        ftns_vals = fitness(all_scdl, num_course)
        ftns_dict = dict(zip(all_popu, ftns_vals))

        top_chrms=sorted(all_popu,key=lambda x:ftns_dict[x],reverse=True)

        next_gen = top_chrms[:10]
        cur_best_chrm = top_chrms[0]
        cur_best_ftns = ftns_dict[cur_best_chrm]
        if cur_best_ftns&gt; best_ftns:
            best_ftns = cur_best_ftns
            best_chrm = cur_best_chrm
            if best_ftns == 0:
                break

    return best_ftns, best_chrm,lst_popu
# task 2
def two_pts_crsovr(prnt1,prnt2,chrom_len):

    r_idx1 = rd.randint(0,chrom_len-2)
    r_idx2 = rd.randint(r_idx1+1,chrom_len-1)

    ofspr1 = prnt1[0:r_idx1] + prnt2[r_idx1:r_idx2] + prnt1[r_idx2:]
    ofspr2 = prnt2[0:r_idx1] + prnt1[r_idx1:r_idx2] + prnt2[r_idx2:]
    return ofspr1,ofspr2

# task 1
inp = open('input.txt', 'r')
num_course, n_time = map(int, inp.readline().split())
courses = []
for i in range(num_course):
    n=(inp.readline().split())
    courses.append(n)

val,chrm,frst_gen = ga(num_course,n_time,gen=10)
print(val)
print(chrm)

# task 2
chrom_len = num_course*n_time
popu = frst_gen
any_two_prnt = rd.choices(popu,k=2)
ans = two_pts_crsovr(any_two_prnt[0],any_two_prnt[1],chrom_len)
print(list(ans))

inp.close()</pre>
</body>
</html>
