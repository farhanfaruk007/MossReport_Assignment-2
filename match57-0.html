<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/7/22101706_md_ahnaf_iqbal_cse422_07_assignment02_fall2024_-_MD._AHNAF_IQBAL.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/7/22101706_md_ahnaf_iqbal_cse422_07_assignment02_fall2024_-_MD._AHNAF_IQBAL.py<p></p><pre>
# -*- coding: utf-8 -*-
"""22101706_Md. Ahnaf Iqbal_CSE422_07_Assignment02_Fall2024.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/15hiJvoezgTTz_wYYLj38jn45TL-CmPrk
"""

# MAKE SURE TO RUN EVERY CELLS
#IN THE INPUT FILE, DONT KEEP AN EMPTY NEW LINE AT THE END

import random

inp_file1 = open("inp_part1.txt", "r")
out_file1 = open("out_part1.txt", "w")

first_line = inp_file1.readline()
first_line = first_line.split()

for i in range(len(first_line)):
  first_line[i] = int(first_line[i])
print(first_line)

N = first_line[0]
T = first_line[1]

rest_lines = inp_file1.read().split("\n")
print(rest_lines)

def population_generator(size, n, t):
  str_len = n*t
  start_population = []
  for i in range(size):
    chromosome = ""
    for j in range(str_len):
      zero_one_gen = random.randint(0, 1)
      chromosome += str(zero_one_gen)
    start_population.append(chromosome)
    #print(start_population)
  return start_population

def random_selection(population):
  random_idx1 = random.randint(0, len(population) - 1)
  random_idx2 = random.randint(0, len(population) - 1)
  random_selected1 = population[random_idx1]
  random_selected2 = population[random_idx2]
  while random_selected1 == random_selected2:
    random_idx = random.randint(0, len(population) - 1)
    random_selected2 = population[random_idx]
  return random_selected1, random_selected2

test_population = population_generator(10, 3, 3)
test_selection = random_selection(test_population)
print(test_selection)

def fitness_checker(selected_set, n, t):
  course_num = n
  timeslot = t
  course_timeslot = []
  for i in range(0, len(selected_set), course_num):
      start_end = selected_set[i:i+course_num]
      course_timeslot.append(start_end)
  #print(course_timeslot)

  courses_repeat_track = {}
<a name="8"></a><font color="#00FFFF"><a href="match57-1.html#8" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

  for i in range(course_num):
      courses_repeat_track[i]=0
  #print(courses_repeat_track)

  timeslot_overlap_track = {}
  for i in range(timeslot):
      timeslot_overlap_track[i]=0
  #print(timeslot_overlap_track)


  for i in range(len(course_timeslot)):
</font>    selected_timeslot = course_timeslot[i]
    for j in range(len(selected_timeslot)):
      if course_timeslot[i][j] == "1":
        courses_repeat_track[j] += 1
        timeslot_overlap_track[i] += 1

  print(courses_repeat_track)
  print(timeslot_overlap_track)


<a name="2"></a><font color="#0000FF"><a href="match57-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_3.gif"/></a>

  consist_penal = 0
  overlap_penal = 0

  for i in courses_repeat_track.values():
    consist_penal+=abs(i-1)

  for j in timeslot_overlap_track.values():
    if j&lt;=0:
        pass
    else:
        overlap_penal += j-1

  total_penal = abs(consist_penal+overlap_penal)
  return selected_set,-total_penal
</font>
t_fitness, value = fitness_checker('011010010',3,3)
print(t_fitness, value)

def genetic_algorithm(parent1,parent2, n,t):
  global start_population
  temp_population = []

  half_itr = len(start_population)//2
  for i in range(half_itr):
      p1 = fitness_checker(parent1, n, t)
      p2 = fitness_checker(parent2, n ,t)
      if p1[1]==0:
          return p1[0],p1[1]
      elif p2[1]==0:
          return p2[0],p2[1]

      children1, children2 = single_point_crossover(parent1,parent2)
      random_number = random.randint(0,70)
      if random_number &gt; 20:
          children1 = mutation(children1)
          children2 = mutation(children2)
      a1 = fitness_checker(children1, n, t)
      a2 = fitness_checker(children2, n, t)

      if a1[1]==0:
<a name="3"></a><font color="#00FFFF"><a href="match57-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

          return a1[0],a1[1]
      elif a2[1]==0:
          return a2[0],a2[1]
      else:
          temp_population.append(children1)
          temp_population.append(children2)
  start_population = temp_population
  return None

def single_point_crossover(parent1,parent2):
</font><a name="7"></a><font color="#0000FF"><a href="match57-1.html#7" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

  cross_point1 = random.randint(0,len(parent1)-1)
  cross_point2 = cross_point1 + 1

  children1 = parent1[0:cross_point2]+parent2[cross_point2:]
  children2 = parent2[0:cross_point2]+parent1[cross_point2:]
</font>
  return children1, children2

def mutation(selected_population):
  random_idx = random.randint(0,len(selected_population)-1)
  #rand_value = random.randint(0,1)
  new_str = ""
  for i in range(len(selected_population)):
      if i==random_idx:
        if selected_population[i] == "0":
          new_str += str(1)
        elif selected_population[i] == "1":
          new_str += str(0)
      else:
          new_str += selected_population[i]
  return new_str

t_case = mutation("10101")
print(t_case)

#PART 1

generated_population = population_generator(10, N, T)
print(generated_population)
start_population = generated_population

out_file1.write(f"Part 1 Output:\n")

output_flag =  False
fetched_result = None

for x in start_population:
  f1 = fitness_checker(x, N, T)
  fitness_value = f1[1]
  if fitness_value == 0:
      output_flag = True
      fetched_result = f1
      break
if output_flag == True:
  out_file1.write(f"{fetched_result[0]}\n")
  out_file1(f"{fetched_result[1]}")

else:
  i = 0
  output_flag = False

  while i &lt; 350:
    selected_str = random_selection(start_population)
    print(selected_str)
    hybrid_popu = genetic_algorithm(selected_str[0], selected_str[1], N, T)
<a name="4"></a><font color="#FF00FF"><a href="match57-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

    if hybrid_popu != None:
        output_flag = True
        out_file1.write(f"{hybrid_popu[0]}\n")
        out_file1.write(f"{hybrid_popu[1]}")
        break
    i+=1

  if output_flag == False:
      chromosome_str_track = []
      fitness_value_track = []
      for x in start_population:
          fitness_calc = fitness_checker(x, N, T)
</font><a name="0"></a><font color="#FF0000"><a href="match57-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

          chromosome_str_track.append(fitness_calc[0])
          fitness_value_track.append(fitness_calc[1])


      max_value = fitness_value_track[0]
      idx = 0
      for i in range(len(fitness_value_track)):
          if fitness_value_track[i] &gt; max_value:
              max_value = fitness_value_track[i]
              index = i
      out_file1.write(f"{chromosome_str_track[idx]}\n")
      out_file1.write(f"{fitness_value_track[idx]}")




out_file1.close()

def double_point_crossover(parent1, parent2):
</font>  first_cross_point = random.randint(0, len(parent1)- 3)
  second_cross_point_start = first_cross_point + 1
<a name="9"></a><font color="#FF00FF"><a href="match57-1.html#9" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

  second_cross_point_end = random.randint (second_cross_point_start , len(parent1)-1)
  third_cross_pont_start = second_cross_point_end + 1


  children1 = parent1[0:second_cross_point_start] + parent2[second_cross_point_start:third_cross_pont_start]+parent1[third_cross_pont_start:]
  children2 = parent2[0:second_cross_point_start]+parent1[second_cross_point_start:third_cross_pont_start]+parent2[third_cross_pont_start:]
</font>
  return children1, children2

double_cross = double_point_crossover("1111111111", "0000000000")
print(double_cross)

def genetic_algorithm_double_crosspoint(parent1,parent2, n,t):
  global start_population
  temp_population = []

  half_itr = len(start_population)//2
  for i in range(half_itr):
      p1 = fitness_checker(parent1, n, t)
      p2 = fitness_checker(parent2, n ,t)
      if p1[1]==0:
          return p1[0],p1[1]
      elif p2[1]==0:
          return p2[0],p2[1]

      children1, children2 = double_point_crossover(parent1,parent2)
      random_number = random.randint(0,70)
      if random_number &gt; 20:
          children1 = mutation(children1)
          children2 = mutation(children2)
      a1 = fitness_checker(children1, n, t)
      a2 = fitness_checker(children2, n, t)

      if a1[1]==0:
<a name="5"></a><font color="#FF0000"><a href="match57-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

          return a1[0],a1[1]
      elif a2[1]==0:
          return a2[0],a2[1]
      else:
          temp_population.append(children1)
          temp_population.append(children2)
  start_population = temp_population
  return None

#PART 2

out_file2 = open("out_part2.txt", "w")
</font>
out_file2.write(f"Part 2 Output:\n")



generated_population = population_generator(10, N, T)
print(generated_population)
start_population = generated_population

output_flag =  False
fetched_result = None

for x in start_population:
  f1 = fitness_checker(x, N, T)
  fitness_value = f1[1]
  if fitness_value == 0:
      output_flag = True
      fetched_result = f1
      break
if output_flag == True:
  out_file1.write(f"{fetched_result[0]}\n")
  out_file1(f"{fetched_result[1]}")

else:
  i = 0
  output_flag = False

  while i &lt; 350:
    selected_str = random_selection(start_population)
    print(selected_str)
    hybrid_popu = genetic_algorithm_double_crosspoint(selected_str[0], selected_str[1], N, T)
<a name="6"></a><font color="#00FF00"><a href="match57-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    if hybrid_popu != None:
        output_flag = True
        out_file2.write(f"{hybrid_popu[0]}\n")
        out_file2.write(f"{hybrid_popu[1]}")
        break
    i+=1

  if output_flag == False:
      chromosome_str_track = []
      fitness_value_track = []
      for x in start_population:
          fitness_calc = fitness_checker(x, N, T)
</font><a name="1"></a><font color="#00FF00"><a href="match57-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_4.gif"/></a>

          chromosome_str_track.append(fitness_calc[0])
          fitness_value_track.append(fitness_calc[1])


      max_value = fitness_value_track[0]
      idx = 0
      for i in range(len(fitness_value_track)):
          if fitness_value_track[i] &gt; max_value:
              max_value = fitness_value_track[i]
              index = i
      out_file2.write(f"{chromosome_str_track[idx]}\n")
      out_file2.write(f"{fitness_value_track[idx]}")




out_file2.close()</font></pre>
</body>
</html>
