<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/13/22101509_Srizee_cse422_sec13_-_MAISA_TARANNUM_SRIZEE.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/13/22101509_Srizee_cse422_sec13_-_MAISA_TARANNUM_SRIZEE.py<p></p><pre>
# -*- coding: utf-8 -*-
"""22101509_CSE422_Sec13.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/13dXxBmHSg_7jmAS4_KIiGmztD9FqYo70
"""

import random

def genetic_algorithm(num_courses, num_slots, population_size, max_generations, mutation_probability):
    population = generate_population(population_size, num_courses, num_slots)

    for i in range(max_generations):
        fitnesses= []
        fitness_scores = [calculate_fitness(chromosome, num_courses, num_slots) for chromosome in population]
<a name="1"></a><font color="#00FF00"><a href="match86-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

        fitnesses.append(fitness_scores)
        new_population = []
        for _ in range(population_size // 2):
            parent1, parent2 = select_parents(population, fitness_scores)
            offspring1, offspring2 = single_point_crossover(parent1, parent2)
            offspring1 = mutate(offspring1, mutation_probability)
            offspring2 = mutate(offspring2, mutation_probability)
            new_population.extend([offspring1, offspring2])

        population = new_population

    best_chromosome = None
    best_fitness = float('-inf')

    for chromosome in population:
        fitness_scores = calculate_fitness(chromosome, num_courses, num_slots)
        if fitness_scores &gt; best_fitness:
            best_fitness = fitness_scores
            best_chromosome = chromosome


    return best_chromosome, best_fitness
</font>
def generate_population(population_size, num_courses, num_slots):
<a name="3"></a><font color="#00FFFF"><a href="match86-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_5.gif"/></a>

    population = []
    for m in range(population_size):
        chromosome = ''
        for m in range(num_courses * num_slots):
            gene = random.choice('01')
            chromosome += gene
        population.append(chromosome)
    return population
def calculate_fitness(chromosome, num_courses, num_slots):
</font>    penalty_overlap = 0
    penalty_consistency= 0


    for t in range(num_slots):
<a name="0"></a><font color="#FF0000"><a href="match86-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_14.gif"/></a>

        segment = chromosome[t * num_courses:(t + 1) * num_courses]
        courses_in_slot = segment.count('1')
        if courses_in_slot &gt; 1:
            penalty_overlap += (courses_in_slot - 1)

    course_counts = [0] * num_courses
    for t in range(num_slots):
        segment = chromosome[t * num_courses:(t + 1) * num_courses]
        for i in range(num_courses):
            if segment[i] == '1':
                course_counts[i] += 1
    for count in course_counts:
        if count != 1:
            penalty_consistency += abs(count - 1)

    total_penalty = (penalty_overlap + penalty_consistency)
    fitness_scores= -total_penalty
    return fitness_scores

def select_parents(population, fitnesses):
</font>    total_fitness = sum(fitnesses)
<a name="5"></a><font color="#FF0000"><a href="match86-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    probabilities = [f / total_fitness for f in fitnesses]
    parents = random.choices(population, probabilities, k=2)
    return parents

def single_point_crossover(parent1, parent2):
    crossover_point = random.randint(1, len(parent1) - 1)
    offspring1 = parent1[:crossover_point] + parent2[crossover_point:]
</font>    offspring2 = parent2[:crossover_point] + parent1[crossover_point:]
    return offspring1, offspring2

def two_point_crossover(parent1, parent2):
    point1 = random.randint(1, len(parent1) - 2)
    point2 = random.randint(point1 + 1, len(parent1) - 1)
    offspring1 = parent1[:point1] + parent2[point1:point2] + parent1[point2:]
<a name="2"></a><font color="#0000FF"><a href="match86-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_7.gif"/></a>

    offspring2 = parent2[:point1] + parent1[point1:point2] + parent2[point2:]
    return offspring1, offspring2

def mutate(chromosome, mutation_probability):
    mutated_chromosome = ""
    for bit in chromosome:
        random_number = random.random()
        if random_number &gt; mutation_probability:
            mutated_chromosome += bit
        else:
            mutated_chromosome += '1' if bit == '0' else '0'
    return mutated_chromosome
def main():
</font>    num_courses, num_slots = map(int, input("Enter number of courses and slots: ").split())
<a name="6"></a><font color="#00FF00"><a href="match86-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_3.gif"/></a>

    course_codes = [input(f"Enter course code {i + 1}: ").strip() for i in range(num_courses)]

    population_size = 100
    max_generations = 100
    mutation_probability = 0.01

    best_schedule, best_fitness = genetic_algorithm(num_courses, num_slots, population_size, max_generations, mutation_probability)
    print("Best Schedule:", best_schedule)
</font>    print("Best Fitness:", best_fitness)

    # Part 2: Testing Two-Point Crossover
<a name="4"></a><font color="#FF00FF"><a href="match86-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_5.gif"/></a>

    parent1 = random.choice(generate_population(1, num_courses, num_slots))
    parent2 = random.choice(generate_population(1, num_courses, num_slots))
    offspring1, offspring2 = two_point_crossover(parent1, parent2)
    print("Part2")
    print(f"Parent 1: {parent1}")
    print(f"Parent 2: {parent2}")
    print(f"Offspring 1: {offspring1}")
    print(f"Offspring 2: {offspring2}")

if __name__ == "__main__":
</font>    main()

#part3
def tournament_selection(population, fitness_scores, tournament_size=3):
    "We have to Select a parent using tournament selection."""
    tournament_indices = random.sample(range(len(population)), tournament_size)
    tournament_individuals = [population[i] for i in tournament_indices]
    tournament_fitnesses = [fitness_scores[i] for i in tournament_indices]


    best_index = tournament_fitnesses.index(max(tournament_fitnesses))
    return tournament_individuals[best_index]


for _ in range(population_size // 2):
            parent1 = tournament_selection(population, fitness_scores)
            parent2 = tournament_selection(population, fitness_scores)


"These are the changes, if we use tournament selection for selecting parent"</pre>
</body>
</html>
