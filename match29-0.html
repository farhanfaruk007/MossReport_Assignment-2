<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/4/24141083_RonodeepBhowmik_CSE422_04_Assignment02_Fall2024_-_RONODEEP_BHOWMIK.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/4/24141083_RonodeepBhowmik_CSE422_04_Assignment02_Fall2024_-_RONODEEP_BHOWMIK.py<p></p><pre>
# -*- coding: utf-8 -*-
"""cse422_lab_02.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1CLV79nc44QKoV4R124jzkGNHVAiTPwQp
"""

import random

<a name="3"></a><font color="#00FFFF"><a href="match29-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_9.gif"/></a>

def read_fl(fl_path):
    with open(fl_path, 'r') as file:
        f_line = file.readline().strip()
        n_corses, n_times = map(int, f_line.split())
        c_list = []
        for line in file:
            c_list.append(line.strip())
            if len(c_list) == n_corses:
                break
    return n_corses, n_times, c_list

def chromo_gen(n):
    return [random.randint(0, 1) for _ in range(n)]

def t_p_CO(posi_1, posi_2):
</font>
    if len(posi_1) is not  len(posi_2):
        raise ValueError("Parents must be of equal length")


    fst_posi = random.randint(0, len(posi_1) - 2)


    snd_posi = random.randint(fst_posi + 1, len(posi_1) - 1)

    cld1 = (posi_1[:fst_posi] +
              posi_2[fst_posi:snd_posi] +
              posi_1[snd_posi:])

    cld2 = (posi_2[:fst_posi] +
<a name="1"></a><font color="#00FF00"><a href="match29-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_16.gif"/></a>

              posi_1[fst_posi:snd_posi] +
              posi_2[snd_posi:])

    return cld1, cld2

def chromosomes(n, t):
    store_chro = []
    for _ in range(t):
        lst1 = chromo_gen(n)
        store_chro.extend(lst1)
    return store_chro

def zero_sgmts(store_chro, no_corse, t_slot):
    for ind in range(t_slot):
        for x in range(t_slot):
            srts = x * no_corse
            ends = srts + no_corse
            timing = store_chro[srts:ends]
            if all(course == 0 for course in timing):
                ran_point = chromo_gen(no_corse)
                store_chro[srts:ends] = ran_point

def checking_fitness(store_chro, n, t):
    o_l_pnlty = 0
    con_pnlty = 0

    for a in range(t):
        points = store_chro[a * n:(a + 1) * n]
</font>        store = sum(points)
<a name="2"></a><font color="#0000FF"><a href="match29-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_15.gif"/></a>

        if store &gt; 1:
            o_l_pnlty += store - 1

    for z in range(n):
        store = sum(store_chro[x * n + z] for x in range(t))
        if store != 1:
            con_pnlty += abs(store - 1)

    return - (o_l_pnlty + con_pnlty)

def C_selection(posi, fit_check):
    store_f = sum(fit_check)
    formula = [f / store_f for f in fit_check]
    store_posi_1 = random.choices(posi, formula)[0]
    store_posi_2 = random.choices(posi, formula)[0]
    return store_posi_1, store_posi_2

def SP_CO(store_posi_1, store_posi_2, n, t):
    co_point = random.randint(1, n * t - 1)
    ct_1 = store_posi_1[:co_point] + store_posi_2[co_point:]
</font>    ct_2 = store_posi_2[:co_point] + store_posi_1[co_point:]
    return ct_1, ct_2

def step_mutations(c_pnt, mu_rat):
<a name="0"></a><font color="#FF0000"><a href="match29-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_29.gif"/></a>

    for i in range(len(c_pnt)):
        if random.random() &lt; mu_rat:
            c_pnt[i] = 1 - c_pnt[i]

def popu_step(n, t):
    pop = 50
    store_popu = []
    for _ in range(pop):
        chromo_list = chromosomes(n, t)
        zero_sgmts(chromo_list, n, t)
        store_popu.append(chromo_list)
    return store_popu

def gen_algo(n, t, courses):

    t_popu = popu_step(n, t)


    fit = float('-inf')
    shdl = None
    no_interations = 100
    rate = 0.01


    parent1, parent2 = None, None
    offspring1, offspring2 = None, None

    for zen in range(no_interations):

        fittest = [checking_fitness(chromo_list, n, t) for chromo_list in t_popu]

        best_fittest = max(fittest)
        if best_fittest &gt; fit:
            fit = best_fittest
            best_index = fittest.index(best_fittest)
            shdl = t_popu[best_index]

            parent1, parent2 = C_selection(t_popu, fittest)
            offspring1, offspring2 = t_p_CO(parent1, parent2)

        if fit == 0:
            break

        n_popu = []
        while len(n_popu) &lt; len(t_popu):

            if parent1 is None or parent2 is None:
                parent1, parent2 = C_selection(t_popu, fittest)

            children_1, children_2 = SP_CO(parent1, parent2, n, t)

            step_mutations(children_1, rate)
            step_mutations(children_2, rate)

            zero_sgmts(children_1, n, t)
            zero_sgmts(children_2, n, t)

            n_popu.extend([children_1, children_2])

        t_popu = n_popu[:len(t_popu)]
</font>

    print(f" parent1: {(''.join([str(gene) for gene in parent1]) if parent1 is not None else 'No parent 1 found')}")
    print(f" parent2: {(''.join([str(gene) for gene in parent2]) if parent2 is not None else 'No parent 2 found')}")
    print(f" offspring1: {(''.join([str(gene) for gene in offspring1]) if offspring1 is not None else 'No offspring 1 found')}")
    print(f" offspring2: {(''.join([str(gene) for gene in offspring2]) if offspring2 is not None else 'No offspring 2 found')}")



    return ''.join(map(str, shdl)) if shdl is not None else "No schedule found", fit


inp_patsh = "/content/input.txt"
n, t, courses = read_fl(inp_patsh)

shdl, fir = gen_algo(n, t, courses)
print("\nBest Schedule:", shdl)
print("Fitness:", fir)</pre>
</body>
</html>
