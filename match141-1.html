<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/8/23241116_Ahmad_Farruk_Towsif_8_-_AHMAD_FARRUK_TOWSIF.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/11/21301391_fareha_alam_cse422_11_lab_assignment2.py<p></p><pre>
# -*- coding: utf-8 -*-
"""21301391_Fareha Alam_CSE422_11_Lab_Assignment2

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1EwstG54XP_KS_WbnQDRUh_3u3DnSBGMd
"""

import random

input_file = open("input.txt", "r")
line = input_file.readline().split()
rows_count, columns_count = int(line[0]), int(line[1])
constraint_list = [input_file.readline().strip() for _ in range(rows_count)]

def generate_population(population_size, rows_count, columns_count):
    population = []
    for _ in range(population_size):
        chromosome = []
        for __ in range(rows_count * columns_count):
            chromosome.append(random.randint(0, 1))
        population.append(chromosome)
    return population

def fitness_function(chromosome, rows_count, columns_count):
    penalty_overflow = 0
    penalty_constraint = 0
    row_sums = [0] * rows_count
<a name="3"></a><font color="#00FFFF"><a href="match141-0.html#3" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_4.gif"/></a>

    column_sums = [0] * columns_count

    for row_index in range(columns_count):
        row_slice = chromosome[row_index * rows_count:(row_index + 1) * rows_count]
        ones_in_row = row_slice.count(1)
        if ones_in_row &gt; 1:
            penalty_overflow += (ones_in_row - 1)
</font>        column_sums[row_index] = ones_in_row

    row_index = 0
    while row_index &lt; rows_count:
        row_sums[row_index] = sum(chromosome[column_index * rows_count + row_index] for column_index in range(columns_count))
        row_index += 1

    for count in row_sums:
        if count != 1:
            penalty_constraint += abs(count - 1)

    return -(penalty_overflow + penalty_constraint)

def select_parents(population, fitness_list):
    total_fitness = sum(fitness_list)
<a name="0"></a><font color="#FF0000"><a href="match141-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_8.gif"/></a>

    selection_probabilities = [fitness / total_fitness for fitness in fitness_list]
    selected_parents = random.choices(population, weights=selection_probabilities, k=2)
    return selected_parents

def single_point_crossover(parent1, parent2, rows_count, columns_count):
    crossover_points = sorted(random.sample(range(1, rows_count * columns_count), 2))
    offspring1 = parent1[:crossover_points[0]] + parent2[crossover_points[0]:crossover_points[1]] + parent1[crossover_points[1]:]
</font><a name="4"></a><font color="#FF00FF"><a href="match141-0.html#4" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_4.gif"/></a>

    offspring2 = parent2[:crossover_points[0]] + parent1[crossover_points[0]:crossover_points[1]] + parent2[crossover_points[1]:]
    return offspring1, offspring2

def two_point_crossover(parent1, parent2, rows_count, columns_count):
</font>    crossover_point1, crossover_point2 = sorted(random.sample(range(1, rows_count * columns_count - 1), 2))
    offspring1 = parent1[:crossover_point1] + parent2[crossover_point1:crossover_point2] + parent1[crossover_point2:]
    offspring2 = parent2[:crossover_point1] + parent1[crossover_point1:crossover_point2] + parent2[crossover_point2:]
    return offspring1, offspring2

def mutate_chromosome(chromosome, mutation_rate=0.01):
    for gene_index in range(len(chromosome)):
        if random.random() &lt; mutation_rate:
            chromosome[gene_index] = 1 - chromosome[gene_index]
    return chromosome

def genetic_algorithm(rows_count, columns_count, constraint_list, population_size=10, max_iterations=100):
    population = generate_population(population_size, rows_count, columns_count)
    best_chromosome = None
    best_fitness = float('-inf')

<a name="2"></a><font color="#0000FF"><a href="match141-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_5.gif"/></a>

    for _ in range(max_iterations):
        fitness_list = [fitness_function(chromosome, rows_count, columns_count) for chromosome in population]
        for index in range(population_size):
            if fitness_list[index] &gt; best_fitness:
                best_fitness = fitness_list[index]
                best_chromosome = population[index]

        new_population = []
</font>        individual_count = 0
<a name="5"></a><font color="#FF0000"><a href="match141-0.html#5" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_4.gif"/></a>

        while individual_count &lt; population_size:
            parent1, parent2 = select_parents(population, fitness_list)
            offspring1, offspring2 = single_point_crossover(parent1, parent2, rows_count, columns_count)
            new_population.append(mutate_chromosome(offspring1))
            new_population.append(mutate_chromosome(offspring2))
            individual_count += 2
</font>        population = new_population[:population_size]
    return best_chromosome, best_fitness

<a name="1"></a><font color="#00FF00"><a href="match141-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_7.gif"/></a>

population_size = 5
population = generate_population(population_size, rows_count, columns_count)
fitness_list = [fitness_function(chromosome, rows_count, columns_count) for chromosome in population]
parent1, parent2 = select_parents(population, fitness_list)
offspring1, offspring2 = two_point_crossover(parent1, parent2, rows_count, columns_count)

labels = ["Parent1", "Parent2", "Offspring1", "Offspring2"]
chromosome_values = [parent1, parent2, offspring1, offspring2]
</font>
for index in range(len(labels)):
    chromosome_string = ''.join(str(gene) for gene in chromosome_values[index])
    print(f"{labels[index]}: {chromosome_string}")

best_chromosome, best_fitness = genetic_algorithm(rows_count, columns_count, constraint_list)
print(''.join(map(str, best_chromosome)))
print(best_fitness)

</pre>
</body>
</html>
