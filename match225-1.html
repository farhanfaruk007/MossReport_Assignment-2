<html>
<head>
<title>C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/6/21301642_monjur_ahmed_cse422_06_assignment02_fall2024_-_MONJUR_AHMED.py</title>
</head>
<body bgcolor="white">
<hr/>
C:/Users/Farhan_Faruk/Downloads/Lab2_Submission/18/24141137_rohan_bahorder_18_lab2_-_ROHAN_BAHORDER.py<p></p><pre>
# -*- coding: utf-8 -*-
"""24141137_Rohan_Bahorder_18_Lab2

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1udmXImLmz92_tqbDRY_zWufvVRxTT8tg
"""

import random


def calculate_fitness(schedule, num_courses, num_slots):

    penalty_overlap = 0
    penalty_consistency = 0

<a name="0"></a><font color="#FF0000"><a href="match225-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_18.gif"/></a>

    timeslots = [schedule[i*num_courses:(i+1)*num_courses] for i in range(num_slots)]

    for i in timeslots:

        num_scheduled = sum(i)
        if num_scheduled &gt; 1:
            penalty_overlap += num_scheduled - 1


    for course_index in range(num_courses):

        scheduled_count = sum(timeslot[course_index] for timeslot in timeslots)
        if scheduled_count != 1:
            penalty_consistency += abs(scheduled_count - 1)


    total_penalty = penalty_overlap + penalty_consistency
    return -total_penalty



def generate_random_schedule(num_courses, num_slots):
    schedule = [0] * (num_courses * num_slots)
    for i in range(num_courses):
        random_slot = random.randint(0, num_slots - 1)
        schedule[random_slot * num_courses + i] = 1
    return schedule



def crossover(parent1, parent2):
    crossover_point = random.randint(1, len(parent1) - 2)
    child1 = parent1[:crossover_point] + parent2[crossover_point:]
</font>    child2 = parent2[:crossover_point] + parent1[crossover_point:]
    return child1, child2



def mutate(schedule, num_courses, num_slots):
    mutation_point = random.randint(0, len(schedule) - 1)

    schedule[mutation_point] = 1 - schedule[mutation_point]
    return schedule


def genetic_algorithm(num_courses, num_slots, population_size=10, generations=100):

    population = [generate_random_schedule(num_courses, num_slots) for _ in range(population_size)]


    fitness_values = [calculate_fitness(schedule, num_courses, num_slots) for schedule in population]

    if all(f &lt;= 0 for f in fitness_values):
        fitness_values = [f + 1 for f in fitness_values]

    for generation in range(generations):

        parents = random.choices(population, weights=fitness_values, k=2)


        child1, child2 = crossover(parents[0], parents[1])


        child1 = mutate(child1, num_courses, num_slots)
        child2 = mutate(child2, num_courses, num_slots)

        worst_indexes = sorted(range(len(fitness_values)), key=lambda i: fitness_values[i])[:2]
        population[worst_indexes[0]], population[worst_indexes[1]] = child1, child2

        fitness_values = [calculate_fitness(schedule, num_courses, num_slots) for schedule in population]


        if all(f &lt;= 0 for f in fitness_values):
            fitness_values = [f + 1 for f in fitness_values]


    best_index = max(range(len(fitness_values)), key=lambda i: fitness_values[i])
    best_schedule = population[best_index]
    best_fitness = fitness_values[best_index]

    return best_schedule, best_fitness



def main():
    try:

        input_data = input("Enter the number of courses and timeslots (e.g. 3 3): ").split()
        if len(input_data) != 2:
            raise ValueError("Please provide exactly two values: number of courses and number of timeslots.")
        num_courses, num_slots = map(int, input_data)


        courses = []
        for i in range(num_courses):
            course = input(f"Enter course {i + 1} code: ").strip()
            courses.append(course)


        print("\nCourses to be scheduled:", courses)
        print(f"Number of timeslots: {num_slots}")

        best_solution, best_fitness = genetic_algorithm(num_courses, num_slots)


        print("Chromosome:", "".join(map(str, best_solution)))
        print("Fitness:", best_fitness)

    except ValueError as ve:
        print(f"Invalid input! {ve}")



if __name__ == "__main__":
    main()

def two_point_crossover(parent1, parent2):
    length = len(parent1)
    p1 = random.randint(1, length - 2)
    p2 = random.randint(p1 + 1, length - 1)

    child1 = parent1[:p1] + parent2[p1:p2] + parent1[p2:]
    child2 = parent2[:p1] + parent1[p1:p2] + parent2[p2:]

    return child1, child2

if __name__ == "__main__":
    parent1 = [0, 0, 0, 1, 1, 1, 0, 0, 0]
    parent2 = [1, 1, 1, 0, 0, 0, 1, 1, 1]

    child1, child2 = two_point_crossover(parent1, parent2)
    print("Child 1:", "".join(map(str, child1)))
    print("Child 2:", "".join(map(str, child2)))



</pre>
</body>
</html>
